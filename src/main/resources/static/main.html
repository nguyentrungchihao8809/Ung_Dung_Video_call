<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P2P Video Call</title>
    <link rel="stylesheet" href="index.css">
</head>
<body>
<a href="javascript:history.back()" class="back-button">
        <img src="muiten.png" alt="Quay lại">
    </a>    
    <div class="container" id="joinContainer">
        <div class="signup-card">
            <h1>Tham gia video call</h1>
            
           <div class="input-group">
                <input type="text" id="usernameInput" placeholder="Nhập tên của bạn">
                <input type="text" id="roomInput" placeholder="Nhập ID phòng">
            </div>
            <button id="joinBtn" onclick="joinRoom()">Tham gia phòng</button>
        </div>


            <div class="welcome-section">
            <img src="video3.GIF" alt="Welcome GIF" class="background-gif">





        <div class="welcome-section">
            <div class="welcome-card">
                <h2>Bấm tham gia</h2>
                <p>Mở ra cách trò chuyện mới, nơi mọi người có thể gặp gỡ và sẽ chia sẻ ở bất kỳ đâu. Chỉ một cú chạm, khoảng cách trở nên gần hơn bao giờ hết.</p>
            </div>
        </div>
    </div>

    <div class="video-section" id="videoSection">
        <div id="statusDiv" class="status"></div>
        
        <div class="users-list" id="usersList" style="display:none;">
            <h3>Người dùng trong phòng:</h3>
            <div id="usersContainer"></div>
        </div>
        
        <div class="videos">
            <div class="video-container">
                <video id="localVideo" autoplay muted playsinline></video>
                <div class="video-label">Bạn</div>
            </div>


                <div class="video-container">
                <video id="remoteVideo" autoplay playsinline></video>
                <div class="video-label">Đối phương</div>
            </div>

        </div>
        
        <div class="controls">
            <!-- NÚT CAMERA với icon - BỎ onclick -->
            <button class="control-btn btn-warning" id="cameraButton">
                <img id="cameraIcon" src="camon.png" alt="Camera" style="width: 30px; height: 30px; vertical-align: middle;">
            </button>
            
            <!-- NÚT MIC với icon - BỎ onclick -->
            <button class="control-btn btn-warning" id="micButton">
                <img id="micIcon" src="mic.png" alt="Microphone" style="width: 30px; height: 30px; vertical-align: middle;">
            </button>
            
            <!-- NÚT RỜI PHÒNG với icon -->
            <button class="control-btn btn-danger" id="phoneButton" onclick="leaveRoom()">
                <img id="phoneIcon" src="phone.png" alt="Phone" style="width: 30px; height: 30px; vertical-align: middle;">
            </button>
        </div>
    </div>

    <script src="app.js"></script>
    
    
    
    <!-- SCRIPT CHUYỂN ĐỔI ICON -->
<!-- SCRIPT CHUYỂN ĐỔI ICON -->
<!-- SCRIPT CHUYỂN ĐỔI ICON -->
<!-- SCRIPT CHUYỂN ĐỔI ICON -->
<script>
    // Biến trạng thái
    let isCameraOn = true;
    let isMicOn = true;
    
    // Đợi trang load xong
    window.addEventListener('load', function() {
        
        // === CAMERA ===
        const cameraBtn = document.getElementById('cameraButton');
        const cameraIcon = document.getElementById('cameraIcon');
        
        if (cameraBtn && cameraIcon) {
            cameraBtn.addEventListener('click', function() {
                // Toggle camera thật
                if (typeof toggleVideo === 'function') {
                    toggleVideo();
                }
                
                // Đổi trạng thái
                isCameraOn = !isCameraOn;
                
                // Đổi icon NGAY
                cameraIcon.src = isCameraOn ? 'camon.png' : 'camoff.png';
            });
            
            cameraBtn.addEventListener('mouseenter', function() {
                cameraIcon.src = isCameraOn ? 'camoff.png' : 'camon.png';
            });
            
            cameraBtn.addEventListener('mouseleave', function() {
                cameraIcon.src = isCameraOn ? 'camon.png' : 'camoff.png';
            });
        }
        
        // === MIC ===
        const micBtn = document.getElementById('micButton');
        const micIcon = document.getElementById('micIcon');
        
        if (micBtn && micIcon) {
            micBtn.addEventListener('click', function() {
                // Toggle mic thật
                if (typeof toggleAudio === 'function') {
                    toggleAudio();
                }
                
                // Đổi trạng thái
                isMicOn = !isMicOn;
                
                // Đổi icon NGAY
                micIcon.src = isMicOn ? 'mic.png' : 'micoff.png';
            });
            
            micBtn.addEventListener('mouseenter', function() {
                micIcon.src = isMicOn ? 'micoff.png' : 'mic.png';
            });
            
            micBtn.addEventListener('mouseleave', function() {
                micIcon.src = isMicOn ? 'mic.png' : 'micoff.png';
            });
        }
        
        // === PHONE ===
        const phoneBtn = document.getElementById('phoneButton');
        const phoneIcon = document.getElementById('phoneIcon');
        
        if (phoneBtn && phoneIcon) {
            phoneBtn.addEventListener('mouseenter', function() {
                phoneIcon.src = 'phoneoff.png';
            });
            
            phoneBtn.addEventListener('mouseleave', function() {
                phoneIcon.src = 'phone.png';
            });
        }
    });
</script>

</body>
</html>
